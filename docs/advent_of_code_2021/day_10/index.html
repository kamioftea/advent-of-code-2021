<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This is my solution for Advent of Code - Day 10 - Syntax Scoring"><meta name="keywords" content="rust, rustlang, rust-lang, day_10"><title>advent_of_code_2021::day_10 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../advent_of_code_2021/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Module day_10</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="day_10" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../advent_of_code_2021/index.html"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">advent_of_code_2021</a>::<wbr><a class="mod" href="#">day_10</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/advent_of_code_2021/day_10.rs.html#1-267" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This is my solution for <a href="https://adventofcode.com/2021/day/10">Advent of Code - Day 10 - <em>Syntax Scoring</em></a></p>
<p>Today was about matching different types of braces, firstly (part one) to check that the braces matched, and
secondly (part two) where closing braces had been missed off the end of the string to close them. Implementing
the state as a stack of characters seemed sensible. An opening brace triggers putting the expected closing brace
on the stack, a closing brace pops the expected brace off the stack and returns an error if it doesn’t match.
Anything left on the stack at the end is returned as the required characters to ‘autocomplete’ the rest of the
line. I originally implemented this as putting the opening brace on the stack, but that required doing the mapping
from opening to closing brace character both when checking for a match and when returning outstanding characters.
It was cleaner to do the mapping upfront.</p>
<p><a href="fn.check_line.html" title="check_line"><code>check_line</code></a> do most of the work for both parts. It was a good opportunity to use Rust’s <a href="https://doc.rust-lang.org/1.59.0/core/result/enum.Result.html" title="Result"><code>Result</code></a> type, and I
implemented a custom enum <a href="enum.ParseError.html" title="ParseError"><code>ParseError</code></a> to capture the errors due to syntax, vs the errors I needed to include
to satisfy edge cases that weren’t in the puzzle input - namely characters that weren’t any of the 8 braces, and
the case where there is one or more closing braces encountered when the stack is empty. <a href="fn.sum_errors.html" title="sum_errors"><code>sum_errors</code></a> wraps
<a href="fn.check_line.html" title="check_line"><code>check_line</code></a> for part one, filtering out ny lines that don’t return a <a href="enum.ParseError.html#variant.MISMATCH" title="ParseError::MISMATCH"><code>ParseError::MISMATCH</code></a>, mapping those
to the correct score, and summing the results. <a href="fn.score_line_autocomplete.html" title="score_line_autocomplete"><code>score_line_autocomplete</code></a> takes the characters returned from a
successfully parsed line and folds them into the expected score. <a href="fn.median_autocomplete_score.html" title="median_autocomplete_score"><code>median_autocomplete_score</code></a> handles the
plumbing of getting the list of successful <a href="fn.check_line.html" title="check_line"><code>check_line</code></a> results, mapping them to the autocomplete score and
returning the median score required for part two’s puzzle result.</p>
<p>One final piece of trivia, I looked into using the characters’ unicode points to avoid using a hash map, but they
were not consistent. <code>(</code> and <code>)</code> are consecutive, but the others are all separated by one character.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="string">&quot;()[]{}&lt;&gt;&quot;</span>.<span class="ident">chars</span>().<span class="ident">map</span>(<span class="op">|</span><span class="ident">c</span><span class="op">|</span> <span class="ident">c</span> <span class="kw">as</span> <span class="ident">usize</span>).<span class="ident">join</span>(<span class="string">&quot;, &quot;</span>));
<span class="comment">// 40, 41, 91, 93, 123, 125, 60, 62</span></code></pre></div>
</div></details><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ParseError.html" title="advent_of_code_2021::day_10::ParseError enum">ParseError</a></div><div class="item-right docblock-short"><p>Used to indicate an error when parsing strings of braces</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.check_line.html" title="advent_of_code_2021::day_10::check_line fn">check_line</a></div><div class="item-right docblock-short"><p>Given a string, either return the list of closing braces needed to completely match the opening braces in order,
or return a <a href="enum.ParseError.html" title="ParseError"><code>ParseError</code></a> if a closing brace that doesn’t match the expected value at any point in the string.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.median_autocomplete_score.html" title="advent_of_code_2021::day_10::median_autocomplete_score fn">median_autocomplete_score</a></div><div class="item-right docblock-short"><p>Find all the lines in the input that are valid, work out the autocomplete score for each, and return the median
score.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.run.html" title="advent_of_code_2021::day_10::run fn">run</a></div><div class="item-right docblock-short"><p>The entry point for running the solutions with the ‘real’ puzzle input.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.score_line_autocomplete.html" title="advent_of_code_2021::day_10::score_line_autocomplete fn">score_line_autocomplete</a></div><div class="item-right docblock-short"><p>Given the list of braces needed to complete a string, fold them into the autocomplete score</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.sum_errors.html" title="advent_of_code_2021::day_10::sum_errors fn">sum_errors</a></div><div class="item-right docblock-short"><p>Find all the lines in the input that return a mismatch error and sum a score based on the character that was 
incorrect.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="advent_of_code_2021" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>