<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This is my solution for Advent of Code - Day 16 - Packet Decoder"><meta name="keywords" content="rust, rustlang, rust-lang, day_16"><title>advent_of_code_2021::day_16 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../advent_of_code_2021/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Module day_16</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="day_16" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../advent_of_code_2021/index.html"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">advent_of_code_2021</a>::<wbr><a class="mod" href="#">day_16</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/advent_of_code_2021/day_16.rs.html#1-370" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This is my solution for <a href="https://adventofcode.com/2021/day/16">Advent of Code - Day 16 - <em>Packet Decoder</em></a></p>
<p>After yesterday’s very technical/theory heavy solution today was working through a fairly
complex specification, but the face-value implementation was efficient once all the parts were
in place.</p>
<p>The bulk of the work is in parsing the input into the hierarchy of packets, <a href="fn.parse_input.html" title="parse_input"><code>parse_input</code></a>.
This is the entry point for a number of functions that are involved in the parsing process.
<a href="fn.to_bits.html" title="to_bits"><code>to_bits</code></a> is a bit clunky, but returns the bits as a <code>Vec&lt;bool&gt;</code> in reverse order so that the
bits can be consumed with <a href="https://doc.rust-lang.org/1.59.0/alloc/vec/struct.Vec.html#method.pop" title="Vec::pop"><code>Vec::pop</code></a> which is much more efficient than taking them from the
head of the <code>Vec</code>. <a href="fn.take_bits.html" title="take_bits"><code>take_bits</code></a> consumes a specified number of bits from the tail, interpreting
them as a number. <a href="fn.parse_packet.html" title="parse_packet"><code>parse_packet</code></a> consumes the version and <a href="enum.PacketType.html" title="PacketType"><code>PacketType</code></a>, then delegates to
<a href="fn.parse_literal.html" title="parse_literal"><code>parse_literal</code></a> and <a href="fn.parse_sub_packets.html" title="parse_sub_packets"><code>parse_sub_packets</code></a> based on the type. Each uses <a href="fn.take_bits.html" title="take_bits"><code>take_bits</code></a> as
appropriate to consume and interpret the required bits according to the spec, and keeps track of
bits consumed to report back to any parent operation packet that is reading in bit length mode.</p>
<p>Once that was done both part one <a href="struct.Packet.html#method.version_sum" title="Packet::version_sum"><code>Packet::version_sum</code></a>, and part two <a href="struct.Packet.html#method.compute" title="Packet::compute"><code>Packet::compute</code></a>
recursively walk the packet tree compiling the appropriate solution.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Packet.html" title="advent_of_code_2021::day_16::Packet struct">Packet</a></div><div class="item-right docblock-short"><p>Represents a packet in BITS</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.PacketType.html" title="advent_of_code_2021::day_16::PacketType enum">PacketType</a></div><div class="item-right docblock-short"><p>The eight possible packet types</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_input.html" title="advent_of_code_2021::day_16::parse_input fn">parse_input</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_literal.html" title="advent_of_code_2021::day_16::parse_literal fn">parse_literal</a></div><div class="item-right docblock-short"><p>Parse the section of a literal packet representing the number. This will be in chunks of 5 bits,
the first being a flag that indicates if parsing should continue after this chunk, the next four
being the next four bits in the number. Once the continue flag is <code>0</code> indicating this is the
final chunk, all four-bit sections should be concatenated and interpreted as the binary
representation of a usize. Returns the value and number of bits consumed.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_packet.html" title="advent_of_code_2021::day_16::parse_packet fn">parse_packet</a></div><div class="item-right docblock-short"><p>Read the packet header (version: 3 bits, type: 3 bits). Then based of the type delegate the
parsing of the payload to either <a href="fn.parse_literal.html" title="parse_literal"><code>parse_literal</code></a> or <a href="fn.parse_sub_packets.html" title="parse_sub_packets"><code>parse_sub_packets</code></a>. Return the parsed
<a href="struct.Packet.html" title="Packet"><code>Packet</code></a> and number of bits consumed</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_sub_packets.html" title="advent_of_code_2021::day_16::parse_sub_packets fn">parse_sub_packets</a></div><div class="item-right docblock-short"><p>Parse the sub-packets section of an operation packet.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.run.html" title="advent_of_code_2021::day_16::run fn">run</a></div><div class="item-right docblock-short"><p>The entry point for running the solutions with the ‘real’ puzzle input.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.take_bits.html" title="advent_of_code_2021::day_16::take_bits fn">take_bits</a></div><div class="item-right docblock-short"><p>Consume the last <code>count</code> bits from the end of the provided vector, interpreting them as a binary
representation of a usize.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.to_bits.html" title="advent_of_code_2021::day_16::to_bits fn">to_bits</a></div><div class="item-right docblock-short"><p>Parse a hexadecimal string as a sequence of bits. The returned list is reversed for ease of
consuming the bits via <a href="https://doc.rust-lang.org/1.59.0/alloc/vec/struct.Vec.html#method.pop" title="Vec::pop"><code>Vec::pop</code></a>.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="advent_of_code_2021" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>