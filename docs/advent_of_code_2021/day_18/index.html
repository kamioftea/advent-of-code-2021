<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This is my solution for Advent of Code - Day 18 - Snailfish"><meta name="keywords" content="rust, rustlang, rust-lang, day_18"><title>advent_of_code_2021::day_18 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../advent_of_code_2021/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Module day_18</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="day_18" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../advent_of_code_2021/index.html"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">advent_of_code_2021</a>::<wbr><a class="mod" href="#">day_18</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/advent_of_code_2021/day_18.rs.html#1-387" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This is my solution for <a href="https://adventofcode.com/2021/day/18">Advent of Code - Day 18 - <em>Snailfish</em></a></p>
<p>Today was doing convoluted arithmetic on ‘Snailfish Numbers’, which are made up of a binary tree with digits at the
leaves. The representation was easy enough, but I had to box the non-leaf nodes to prevent the compiler
complaining about the type being potentially infinite. I tried just using references, but it made satisfying the
borrow checker very difficult. This resulted in <a href="enum.SnailfishNumber.html" title="SnailfishNumber"><code>SnailfishNumber</code></a> and <a href="enum.SnailfishNumber.html#method.from" title="SnailfishNumber::from"><code>SnailfishNumber::from</code></a>, a recursive
function that parses a line of the input (each is one number).</p>
<p>The main difficulty of today was implementing <a href="enum.SnailfishNumber.html#method.add" title="SnailfishNumber::add"><code>SnailfishNumber::add</code></a>. The actual addition is simple, but the
resulting checks that the invariants on the new <a href="enum.SnailfishNumber.html" title="SnailfishNumber"><code>SnailfishNumber</code></a> hold: no pair deeper than level 4, no
leaves that are not single digits, and resolving them if they don’t involved some complex recursion and pointer
manipulation. <a href="enum.SnailfishNumber.html#method.check_depth" title="SnailfishNumber::check_depth"><code>SnailfishNumber::check_depth</code></a> handles checking if a pair is too deep, and also if it finds one,
handles passing the numbers of that pair left/right as it unwinds the recursion. <a href="enum.SnailfishNumber.html#method.check_digits" title="SnailfishNumber::check_digits">SnailfishNumber::check_digits</a>
handles splitting leaves with numbers that are not single digits into the relevant pair.</p>
<p>Finally <a href="enum.SnailfishNumber.html#method.magnitude" title="SnailfishNumber::magnitude"><code>SnailfishNumber::magnitude</code></a> implements recursively reducing a <a href="enum.SnailfishNumber.html" title="SnailfishNumber"><code>SnailfishNumber</code></a> tree into a single
number for calculating the result. With these in place, <a href="fn.add_numbers.html" title="add_numbers"><code>add_numbers</code></a> folds each line of the input into the first
number using <a href="enum.SnailfishNumber.html#method.add" title="SnailfishNumber::add"><code>SnailfishNumber::add</code></a> for the solution to part one. <a href="fn.max_sum.html" title="max_sum"><code>max_sum</code></a> uses <a href="../../itertools/trait.Itertools.html#method.permutations" title="Itertools::permutations">Itertools::permutations</a> to
match up each pair of numbers in both orders, map them to the magnitude of the sum, and reduce that to the maximum.</p>
</div></details><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Direction.html" title="advent_of_code_2021::day_18::Direction enum">Direction</a></div><div class="item-right docblock-short"><p>When a pair is exploding due to being too deep, the number that still needs to be assigned is passed up to the
parent. This indicates which way it is travelling / which half of the pair it came from.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.SnailfishNumber.html" title="advent_of_code_2021::day_18::SnailfishNumber enum">SnailfishNumber</a></div><div class="item-right docblock-short"><p>Represents a snailfish number as a binary tree</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.add_numbers.html" title="advent_of_code_2021::day_18::add_numbers fn">add_numbers</a></div><div class="item-right docblock-short"><p>The solution to part one - fold the list of numbers into the first and return the resulting number. The puzzle
solution then converts this to its magnitude, but returning the full tree allows unit tests to compare this to the
expectation.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.max_sum.html" title="advent_of_code_2021::day_18::max_sum fn">max_sum</a></div><div class="item-right docblock-short"><p>The solution to part two - uses <a href="../../itertools/trait.Itertools.html#method.permutations" title="Itertools::permutations">Itertools::permutations</a> to match up each pair of numbers in both orders, map
them to the magnitude of the sum, and reduce that to the maximum.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_input.html" title="advent_of_code_2021::day_18::parse_input fn">parse_input</a></div><div class="item-right docblock-short"><p>Split the input into lines and parse each with <a href="enum.SnailfishNumber.html#method.from" title="SnailfishNumber::from"><code>SnailfishNumber::from</code></a></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.run.html" title="advent_of_code_2021::day_18::run fn">run</a></div><div class="item-right docblock-short"><p>The entry point for running the solutions with the ‘real’ puzzle input.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="advent_of_code_2021" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>